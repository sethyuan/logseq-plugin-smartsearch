README: [中文](https://github.com/sethyuan/logseq-plugin-smartsearch) | [English](https://github.com/sethyuan/logseq-plugin-smartsearch/blob/master/README.en.md) | [日本語](https://github.com/sethyuan/logseq-plugin-smartsearch/blob/master/README.ja.md)

# logseq-plugin-smartsearch **スマート検索 プラグイン**

Logseqで、さまざまな条件を指定して、データを複合的に検索する機能を提供します。通常の検索や検索候補よりも、高機能で優れています。

1. リンクや参照の入力補助
   > Logseqの標準機能で`#`や`[[]]`で表示される入力候補の代替えとして。
1. 条件付き検索 (AND検索)
   > ジャーナルに書かれたブロックであれば、日付順でソートがおこなわれます。

## 使い方 (オプション)

### 検索ボックスを、サイドバーに設置する

- 右サイドバーの目次ページを開きます。どこかのブロックに、Smart Searchのブロックレンダリングコード（`{{renderer :smartsearch}}`）を貼り付けます。その際、前後に一行ずつ開けるようにしてください。つまり、先に3行つくってください。

### ブロックから、入力ボックスを呼び出す

- ショートカットキーと操作
  - 先に、ブロックにカーソルを置き、編集している状態にします。デフォルトのショートカットキー `Ctrl+Space` で呼び出すと、入力・検索ボックスが開きます。`Esc` キーで入力ボックスを閉じます。ショートカットキーは設定から変更ができます。キーボードの上下矢印キーまたはマウスクリックで操作します。

1. ブロックとページの移動
  - `Shift` キーを押しながらブロックまたはページに移動し、`Shift+Alt` キーを押しながらサイドバーでブロックまたはページを開きます。

### 関連するページの検索方法

- ページタグなども含めてキーワードと関連性のあるページの検索ができます。検索結果に、ブロック(リファレンス)は含まれません。「;」をつけて、さらにフィルタリングを加えることも可能です。
- 書き方は `>タグ名`

### 関連するブロックの検索方法

#### 検索の組み合わせ

- 条件をカンマ`,`で区切ります。テキスト、タグ(ページ名)、プロパティ、タスク、日記を組み合わせてコンテンツを検索できます。
   > ちなみにLogseqでは、ページ名とタグは同一レベルの扱いになっています。
- 書き方は `#タグ名, @プロパティ: 値`

#### 検索の種類

1. 文字列キーワードに一致する検索
   - 例: `Logseq`

1. タグで検索
   > #記号とタグ名のキーワードを入力する。そうすると、タグ名の補完がでます。それを選択すると、候補リストが表示されます。
   - 書き方の種類
      1. 通常の書き方は `#タグ名`
      1. `#>タグ名` 直下の子ブロックのみの参照
      1. `##タグ名` 子孫ブロックも含めた参照
      1. `#!タグ名` 特定のタグを含めない

1. ブロックのプロパティ
   > @記号とブロック名のキーワードを入力する
   - 書き方の種類
      1. `@プロパティ` 特定のプロパティを持つ
      1. `@!プロパティ` 特定のプロパティを持たない
      1. `@プロパティ: 値` その値と一致するプロパティ
      1. `@!プロパティ: 値` その値と一致しないプロパティ
      1. `@プロパティ > 値` 数値をもつプロパティ
      > 数値範囲の指示には `>` `<` `=` `<=` `>=` が使用できます。

   1. `@プロパティ~ -1w~d` 日付をもつプロパティ
      > プロパティに日記へのリンクが置かれている場合のみ

1. タスクの検索
   - 書き方は `[]n`
   - nはNOW、lはLATER、 tはTODO、 iはDOING、 dはDONE、 wはWAITING、cはCANCELEDを示します
      > DOINGは、**※dはなくi**です。

1. 日記ブロックの検索
   - 書き方は `%j -1w~d`
      - サポートされる単位は `d` `w` `m` `y` で、それぞれが日、週、月、年を表します。
      - `~` はオプションの期間を表します。
      - `yyyyMMdd` のような絶対日付も使用できます。例: 2023年10月1日は`20231001`
   1. `%j w, []nl` 今週の完了予定のタスク
      > []nlはタスクの検索 nがNOW、 l がLATER
   1. `%j -1w, []nld` 先週のタスク
      > []nldはタスクの検索 nがNOW、lがLATER、dがDONE
   1. `%j +1w, []l` 来週の予定タスク
      > []lはタスクの検索 lがLATER
   1. `%j -1y` 1年前
      > -1y: -1yが一年前の日付
   1. `%j -2y~d` 2年前から現在まで
      > -2y-d -2yが2年前の日付、dが現在の日付(0d)
   1. `%j 20230210` 特定の日
      > 2023年2月10日
   1. `%j 20221231~20230210` 特定の期間
      > 2022年12月31日から2023年2月10日まで

   ---

## 使用例(デモ)

1. ブロックでの操作
   - ショートカットキーを押して、入力ボックスで探す。リンクやタグ、ブロックを見つける

    https://user-images.githubusercontent.com/3410293/201344817-97631368-3ac5-408f-a196-97d71202705f.mp4

1. サイドバーでの操作
   - キーワードなどで検索をして、その候補を見つけ、そのページやブロックを開く

    https://github.com/sethyuan/logseq-plugin-smartsearch/assets/3410293/6410c4a5-79dc-4570-a284-98dba0f40156

1. タグ名の補完と、その選択によってフィルタリングされた候補が表示される

   https://user-images.githubusercontent.com/3410293/203462882-05a03dae-e4d7-46b2-ae52-71f3f99fa72f.mp4

1. タグからページを探す方法

   https://user-images.githubusercontent.com/3410293/222097302-680b4ffd-e47c-4194-a49b-4231a42d08ee.mp4

1. タグを含むブロックを取り出して、内容を挿入する

   https://user-images.githubusercontent.com/3410293/201457231-4e0575e3-b145-41c7-9748-b82b1006ac51.mp4

1. プロパティに一致するページを探して、リンクする

   https://user-images.githubusercontent.com/3410293/206380210-c4260579-e6c1-456f-a527-70153cf4940f.mp4

1. プロパティに日記へのリンクが置かれている場合のみ。日付をクエリーのように検索する

   https://user-images.githubusercontent.com/3410293/218086769-081eadc2-ac02-4cf6-9be7-474b17cbc8e9.mp4

## 製作者にコーヒーをご馳走に buy me a coffee

もしこのソフトウェアがあなたに役立つと考え、肯定的なサポートを提供したい場合、以下のQRコードをスキャンしてご寄付いただければ幸いです。ご支援とご注目、ありがとうございます。

開発者: [Seth YUan](https://github.com/sethyuan)

<a href="https://www.buymeacoffee.com/sethyuan" target="_blank"><img src="https://cdn.buymeacoffee.com/buttons/v2/default-blue.png" alt="Buy Me A Coffee" style="height: 60px !important;width: 217px !important;" ></a>

翻訳者: [YU000jp](https://github.com/YU000jp)